# 3-读取图像、视频和摄像头

## 3.1-读取图像

用`cv2.imread()`读取图像，括号里给出**图片路径**

```python
import cv2

# 读取图像
img = cv2.imread("Resources/lena.png")
```

### 3.1.1-显示图像

`imshow`:表示 image show，它接收两个参数：

1. `output`：窗口名称
2. `img`：显示图片变量名称

```python
cv2.imshow("output", img)
```

运行时会发现图像出现，但窗口立即退出，我们需要使用` cv2.waitKey()`增加窗口显示延迟时间,j 接收整数值，0代表无线延迟；1则代表1毫秒，1000代表1秒

```python
cv2.waitkey(0)
```

<img src="https://typora3.oss-cn-shanghai.aliyuncs.com/202511122234181.png" alt="image-20251108204207356" style="zoom:50%;" />

## 3.2-读取视频

用`cv2.VideoCapture()`读取图像，括号里给出**视频路径**

```python
import cv2

# 读取视频
cap = cv2.VideoCapture("Resources/test_video.mp4")
```

### 3.2.1-显示视频

视频是一系列图像的序列，需要一个 while 循环来逐帧处理。

```python
while True:
    success, img = cap.read()
    cv2.imshow("Video", img)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        # 如果我们想跳出循环，请按键盘上的 q 键
        # & 0xFF:按位与操作，作用是提取返回值的低 8 位。原因：在某些操作系统中，cv2.waitKey() 的返回值可能是一个 32 位整数（高 24 位可能包含额外信息），而按键的 ASCII 码只占用低 8 位。通过 & 0xFF 可以过滤掉高 24 位，仅保留有效的 ASCII 码部分,来排除不同按键的干扰进行判断按键是什么
        # 这边由于video的时间很短，所以会报错-215:Assertion failed)

        break

```

- img变量：图像保存在这个变量中
- success：布尔值，告诉我们是否成功完成

## 3.3-使用网络摄像头

使用网络摄像头和导入视频非常相似,这里我们不再写文件路径，而是在`cv2.VideoCapture()`括号里直接写我们摄像头的 ID。所以如果你只有一个网络摄像头，或者你连接了一台笔记本电脑，ID值你就可以按零键，这将使用默认的摄像头；如果你有多个，可以添加不同的ID号（比如1）

```python
import cv2

# 读取摄像头
cap = cv2.VideoCapture(0)
```

设置参数，希望它由特定的尺寸（定义宽度和高度）

```python
cap.set(3, 640)
cap.set(4, 480)
cap.set(10, 100)
```

`set`函数的两个参数分别为：

1. 第一个值：yaml设置属性的标识符，有0到18共19个属性,如3为宽度，4为高度,10为调整亮度;

2. 第二个值：相应属性的值