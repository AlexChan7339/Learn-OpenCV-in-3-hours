# 5-透视变换

通过透视变换可以在一个图像上获取鸟瞰图，矫正原始图像的透视畸变（倾斜拍摄）。此例中，我们将尝试让最下面那张黑桃K变得平坦，黑桃K四个角上点的坐标已经提前提取到，我们需要用这四个点进行透视变换

<img src="https://typora3.oss-cn-shanghai.aliyuncs.com/202511172225674.png" alt="image-20251109115609232" style="zoom:25%;" />

```python
import cv2
import numpy as np

img = cv2.imread("Resources/cards.jpg")
width, height = 250, 350
# 一张扑克牌通常是2.5 厘米乘以 3.5 厘米

pts1 = np.float32([[111, 219], [287, 188], [154, 482], [352, 400]])
# 图上黑桃K四个点的依次原始位置：左上,右上,左下,右下
# 想要获取这些值，使用画图打开图片，光标来回移动，左下角就会显示光标实时坐标
pts2 = np.float32([[0, 0], [width, 0], [0, height], [width, height]])	# 变换后的坐标
# x轴对应的时宽度方向，y轴对应的是高度方向

# 定义变换矩阵
matrix = cv2.getPerspectiveTransform(pts1, pts2)

# 输出图像
imgOutput = cv2.warpPerspective(img, matrix, (width, height))

cv2.imshow("image", img)
cv2.imshow("ImageOut", imgOut)
cv2.waitKey(0)
```

`cv2.warpPerspective(img, matrix, (width, height))`:

- `img`:进行透视变换的图像对象
- `matrix`：定义了原始图像到目标图像的映射关系，通过它可以计算原始图像中每个像素在目标图像中的新位置
- ` (width, height)`:目标图像的尺寸（`dsize`），格式为 `(宽度, 高度)`，即变换后输出图像的宽和高。
  - 如果 `dsize` 更大，输出图像会包含更多变换后的内容（避免边缘被截断）；

<img src="https://typora3.oss-cn-shanghai.aliyuncs.com/202511172225645.png" alt="image-20251109121201363" style="zoom:33%;" />